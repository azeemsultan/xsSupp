{"ast":null,"code":"(function () {\n  'use strict';\n\n  var L = require('leaflet');\n\n  var polyline = require('@mapbox/polyline');\n\n  L.Routing.Google = L.Class.extend({\n    options: {},\n    initialize: function (options) {\n      this.options = L.extend(this.options, {\n        travelMode: google.maps.TravelMode.DRIVING,\n        unitSystem: google.maps.UnitSystem.METRIC,\n        provideRouteAlternatives: true\n      });\n      this.directionsService = new google.maps.DirectionsService();\n      L.Util.setOptions(this, options);\n    },\n    _flatten: function (arrs) {\n      var arr = [],\n          i;\n\n      for (i = 0; i < arrs.length; i++) arr = arr.concat(arrs[i]);\n\n      return arr;\n    },\n    _decodePolyline: function (geometry) {\n      var coords = polyline.decode(geometry, 5),\n          latlngs = new Array(coords.length),\n          i;\n\n      for (i = 0; i < coords.length; i++) {\n        latlngs[i] = new L.LatLng(coords[i][0], coords[i][1]);\n      }\n\n      return latlngs;\n    },\n    _maneuverToInstructionType: function (maneuver) {\n      switch (maneuver) {\n        case 'turn-right':\n          return 'Right';\n\n        case 'turn-slight-right':\n        case 'ramp-right':\n        case 'fork-right':\n          return 'SlightRight';\n\n        case 'turn-sharp-right':\n          return 'SharpRight';\n\n        case 'turn-left':\n          return 'Left';\n\n        case 'turn-slight-left':\n        case 'ramp-left':\n        case 'fork-left':\n          return 'SlightLeft';\n\n        case 'turn-sharp-left':\n          return 'SharpLeft';\n\n        case 'uturn-right':\n        case 'uturn-left':\n          return 'TurnAround';\n\n        case 'roundabout-left':\n        case 'roundabout-right':\n          return 'Roundabout';\n\n        default:\n          return 'Straight';\n      }\n    },\n    route: function (waypoints, callback, context, options) {\n      var that = this;\n      var directions = L.extend({}, this.options);\n\n      if (options.geometryOnly) {\n        directions.provideRouteAlternatives = false;\n      }\n\n      directions.origin = waypoints[0].latLng.lat + ',' + waypoints[0].latLng.lng;\n      directions.destination = waypoints[waypoints.length - 1].latLng.lat + ',' + waypoints[waypoints.length - 1].latLng.lng;\n      directions.waypoints = waypoints.slice(1, waypoints.length - 1).map(function (waypoint) {\n        return {\n          location: waypoint.latLng.lat + ',' + waypoint.latLng.lng,\n          stopover: false\n        };\n      });\n      this.directionsService.route(directions, function (result, status) {\n        if (status == google.maps.DirectionsStatus.OK) {\n          var r = result.routes.map(function (route) {\n            var iroute = {},\n                i,\n                j,\n                step,\n                points;\n            iroute.name = route.summary;\n            iroute.summary = {\n              totalDistance: that._flatten(route.legs.map(function (leg) {\n                return leg.steps.map(function (step) {\n                  return step.distance.value;\n                });\n              })).reduce(function (previousValue, currentValue) {\n                return previousValue + currentValue;\n              }),\n              totalTime: that._flatten(route.legs.map(function (leg) {\n                return leg.steps.map(function (step) {\n                  return step.duration.value;\n                });\n              })).reduce(function (previousValue, currentValue) {\n                return previousValue + currentValue;\n              })\n            };\n            iroute.coordinates = [];\n            var indices = [],\n                indicesSecondary = [];\n            var waypointIndices = [0];\n            var nWaypoint = 1;\n\n            for (i = 0; i < route.legs.length; i++) {\n              indicesSecondary = [];\n              var stepsPoints = [];\n\n              for (j = 0; j < route.legs[i].steps.length; j++) {\n                step = route.legs[i].steps[j];\n                points = that._decodePolyline(step.polyline.points);\n                stepsPoints[j] = points.length;\n                indicesSecondary.push(iroute.coordinates.length);\n                iroute.coordinates = iroute.coordinates.concat(points);\n              }\n\n              indices.push(indicesSecondary);\n\n              for (var j = 0; j < route.legs[i].via_waypoints.length; j++) {\n                si = route.legs[i].via_waypoint[j].step_index;\n                sp = route.legs[i].via_waypoint[j].step_interpolation;\n                waypointIndices[nWaypoint] = indicesSecondary[si] + Math.floor(stepsPoints[si] * sp);\n                nWaypoint++;\n              }\n            }\n\n            iroute.inputWaypoints = waypoints || [];\n            iroute.waypoints = iroute.actualWaypoints = waypoints;\n            waypointIndices[nWaypoint] = iroute.coordinates.length - 1;\n            iroute.waypointIndices = waypointIndices;\n\n            if (!options.geometryOnly) {\n              iroute.instructions = [];\n\n              for (i = 0; i < route.legs.length; i++) for (j = 0; j < route.legs[i].steps.length; j++) {\n                step = route.legs[i].steps[j];\n                iroute.instructions.push({\n                  type: that._maneuverToInstructionType(step.maneuver),\n                  text: step.instructions.replace(/<(?:.|\\n)*?>/gm, ''),\n                  distance: step.distance.value,\n                  time: step.duration.value,\n                  index: indices[i][j],\n                  exit: null //instr.exit_number\n\n                });\n              }\n            }\n\n            return iroute;\n          });\n          callback.call(context || callback, null, r);\n        } else callback.call(context, {\n          status: status,\n          message: result\n        });\n      });\n      return this;\n    }\n  });\n  module.exports = L.Routing.Google;\n})();","map":{"version":3,"sources":["C:/Users/RBTG/Desktop/FYP-Code/fyp/fyp-frontend/node_modules/lrm-google/lrm-google.js"],"names":["L","require","polyline","Routing","Google","Class","extend","options","initialize","travelMode","google","maps","TravelMode","DRIVING","unitSystem","UnitSystem","METRIC","provideRouteAlternatives","directionsService","DirectionsService","Util","setOptions","_flatten","arrs","arr","i","length","concat","_decodePolyline","geometry","coords","decode","latlngs","Array","LatLng","_maneuverToInstructionType","maneuver","route","waypoints","callback","context","that","directions","geometryOnly","origin","latLng","lat","lng","destination","slice","map","waypoint","location","stopover","result","status","DirectionsStatus","OK","r","routes","iroute","j","step","points","name","summary","totalDistance","legs","leg","steps","distance","value","reduce","previousValue","currentValue","totalTime","duration","coordinates","indices","indicesSecondary","waypointIndices","nWaypoint","stepsPoints","push","via_waypoints","si","via_waypoint","step_index","sp","step_interpolation","Math","floor","inputWaypoints","actualWaypoints","instructions","type","text","replace","time","index","exit","call","message","module","exports"],"mappings":"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","sourcesContent":["(function () {\n  'use strict';\n\n  var L = require('leaflet');\n  var polyline = require('@mapbox/polyline');\n\n  L.Routing.Google = L.Class.extend({\n    options: {},\n\n    initialize: function (options) {\n      this.options = L.extend(this.options, {\n        travelMode: google.maps.TravelMode.DRIVING,\n        unitSystem: google.maps.UnitSystem.METRIC,\n        provideRouteAlternatives: true\n      });\n\n      this.directionsService = new google.maps.DirectionsService();\n\n      L.Util.setOptions(this, options);\n    },\n\n    _flatten: function (arrs) {\n      var arr = [],\n        i;\n      for (i = 0; i < arrs.length; i++) arr = arr.concat(arrs[i]);\n      return arr;\n    },\n\n    _decodePolyline: function (geometry) {\n      var coords = polyline.decode(geometry, 5),\n        latlngs = new Array(coords.length),\n        i;\n      for (i = 0; i < coords.length; i++) {\n        latlngs[i] = new L.LatLng(coords[i][0], coords[i][1]);\n      }\n\n      return latlngs;\n    },\n\n    _maneuverToInstructionType: function (maneuver) {\n      switch (maneuver) {\n        case 'turn-right':\n          return 'Right';\n        case 'turn-slight-right':\n        case 'ramp-right':\n        case 'fork-right':\n          return 'SlightRight';\n        case 'turn-sharp-right':\n          return 'SharpRight';\n        case 'turn-left':\n          return 'Left';\n        case 'turn-slight-left':\n        case 'ramp-left':\n        case 'fork-left':\n          return 'SlightLeft';\n        case 'turn-sharp-left':\n          return 'SharpLeft';\n        case 'uturn-right':\n        case 'uturn-left':\n          return 'TurnAround';\n        case 'roundabout-left':\n        case 'roundabout-right':\n          return 'Roundabout';\n        default:\n          return 'Straight';\n      }\n    },\n\n    route: function (waypoints, callback, context, options) {\n      var that = this;\n      var directions = L.extend({}, this.options);\n      if (options.geometryOnly) {\n        directions.provideRouteAlternatives = false;\n      }\n      directions.origin = waypoints[0].latLng.lat + ',' + waypoints[0].latLng.lng;\n      directions.destination = waypoints[waypoints.length - 1].latLng.lat + ',' + waypoints[waypoints.length - 1].latLng.lng;\n      directions.waypoints =\n        waypoints.slice(1, waypoints.length - 1).map(function (waypoint) {\n          return {\n            location: waypoint.latLng.lat + ',' + waypoint.latLng.lng,\n            stopover: false\n          };\n        });\n\n      this.directionsService.route(directions, function (result, status) {\n        if (status == google.maps.DirectionsStatus.OK) {\n          var r = result.routes.map(function (route) {\n            var iroute = {}, i, j, step, points;\n            iroute.name = route.summary;\n            iroute.summary = {\n              totalDistance: that._flatten(route.legs.map(function (leg) {\n                return leg.steps.map(function (step) {\n                  return step.distance.value;\n                });\n              })).reduce(function (previousValue, currentValue) {\n                return previousValue + currentValue;\n              }),\n              totalTime: that._flatten(route.legs.map(function (leg) {\n                return leg.steps.map(function (step) {\n                  return step.duration.value;\n                });\n              })).reduce(function (previousValue, currentValue) {\n                return previousValue + currentValue;\n              })\n            };\n\n            iroute.coordinates = [];\n            var indices = [], indicesSecondary = [];\n\n            var waypointIndices = [0];\n            var nWaypoint = 1;\n\n            for (i = 0; i < route.legs.length; i++) {\n              indicesSecondary = [];\n              var stepsPoints = [];\n\n              for (j = 0; j < route.legs[i].steps.length; j++) {\n                step = route.legs[i].steps[j];\n                points = that._decodePolyline(step.polyline.points);\n                stepsPoints[j] = points.length;\n                indicesSecondary.push(iroute.coordinates.length);\n                iroute.coordinates = iroute.coordinates.concat(points);\n              }\n              indices.push(indicesSecondary);\n\n              for (var j = 0; j < route.legs[i].via_waypoints.length; j++) {\n                si = route.legs[i].via_waypoint[j].step_index;\n                sp = route.legs[i].via_waypoint[j].step_interpolation;\n\n                waypointIndices[nWaypoint] = indicesSecondary[si] + Math.floor(stepsPoints[si] * sp);\n                nWaypoint++;\n              }\n            }\n\n            iroute.inputWaypoints = waypoints || [];\n            iroute.waypoints = iroute.actualWaypoints = waypoints;\n\n            waypointIndices[nWaypoint] = iroute.coordinates.length - 1;\n            iroute.waypointIndices = waypointIndices;\n\n            if (!options.geometryOnly) {\n              iroute.instructions = [];\n              for (i = 0; i < route.legs.length; i++)\n                for (j = 0; j < route.legs[i].steps.length; j++) {\n                  step = route.legs[i].steps[j];\n                  iroute.instructions.push({\n                    type: that._maneuverToInstructionType(step.maneuver),\n                    text: step.instructions.replace(/<(?:.|\\n)*?>/gm, ''),\n                    distance: step.distance.value,\n                    time: step.duration.value,\n                    index: indices[i][j],\n                    exit: null//instr.exit_number\n                  });\n                }\n            }\n            return iroute;\n          });\n          callback.call(context || callback, null, r);\n        }\n        else callback.call(context, {\n          status: status,\n          message: result\n        });\n      });\n      return this;\n    }\n  });\n\n  module.exports = L.Routing.Google;\n})();\n"]},"metadata":{},"sourceType":"script"}